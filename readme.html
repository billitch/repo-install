<html>
  <head>
    <link rel="stylesheet" href="style.css" type="text/css"/>
    <title>Repo-install: An ASDF-install replacement geared towards collaboration</title>
  </head>
  <body>

    <h1>Repo-install: An ASDF-install replacement geared towards collaboration</h1>

    Repo-install is a common lisp package manager that can be used to
    chase down and download dependencies between common lisp
    packages. Unlike other package managers (asdf-install, mudballs),
    repo-install maintains the connection between source code on your
    disk, and the upstream repository.

    <p> In cases where the upstream package is stored using
    distributed version control (DVC), the local files are stored in
    the same DVC system as a clone.

    <p> When the upstream package is not a DVC, repo-install will
    create a local DVC repository with the non-DVC distribution system
    (tarballs, cvs, or svn), as input to the local repository.

    <p>There are two primary advantages to this: 
      <ul>
	<li>Changes you make to your local copy of the package remain
	in place (ie are rebased) even when you update to a newer
	version of the package.
	<li>It is much easier to submit patches to the upstream
	maintainer. For DVC, it is also much easier for the upstream
	maintainer to integrate your patches.
      </ul>

    <p>Both of these capabilities are particularly important when
    working on common lisp. Several very useful common lisp packages
    are maintained on a less than full time basis. You may need to
    maintain your local patches for weeks or forever if the upstream
    maintainer doesn't have the cycles to integrate them sooner.

    <p>Unlike Perl, Python, and Ruby, common lisp does not have a
    reference implementation. Downstream users can submit valuable
    patches for different lisp environments, especially environments
    that are not easily available to a package maintainer.

    <p>Finally, common-lisp users tend to be very technical. With such
    an experienced user base, downstream patches should turn out to be
    more valuable than not.

      
      <h2>Installing</h2>

      Repo-install is bootstrapped using a tarball that can be found
      <a href="http://www.machineinsight.com/repo-install/repo-install-bootstrap.tgz">
	http://www.machineinsight.com/repo-install/repo-install-bootstrap.tgz</a>.
      The tarball contains the minimum set of packages needed to get
      repo-install working. The bootstrap packages (like all
      repo-install packages) are actually software
      repositories. Patches to these systems (including repo-install)
      can be submitted according to conventions for the given system.

      <p>Uninstall to a convienient location and add the following to
      your lisp initialization file.

    <p>
      <pre>(load "<i>&lt;location where you unzipped the bootstrap tarball&gt;</i>/boot.lisp")</pre>

    <p>Repo-install takes the philosophy that the correct version
    control system to use is the one the upstream package maintainer
    is using. Therefore, you will
    need <a href="http://git-scm.com/">Git</a>, <a href="http://bazaar-vcs.org/">Bazaar</a>, <a href="http://subversion.tigris.org/">Subversion</a>,
    and <a href="http://darcs.net/">Darcs</a> installed on your
    system. Using <a href="http://www.macports.org/">MacPorts</a> on OSX, do this:

      <pre>sudo port install git-core bzr subversion darcs</pre>

      
      <h2>Exported Functions</h2>
    <p><em>(ri:install <i>package</i>)</em>
    <p><em>(ri:find-repo <i>package</i>)</em>
    <p><em>(ri:update-repo <i>package</i>)</em>
    <p><em>(ri:update-all-repos <i>package</i>)</em>

<h2>How repo-install handles different upstream repositories</h2>
Intend to add functionality to automatically generate appropriate patch emails. Now, do by hand.
<h3>Git</h3>
<h3>Darcs</h3>
<h3>SVN</h3>
<h3>CVS</h3>
<h3>Tarballs</h3>
<h3>Cliki</h3>

      <h2>To Do</h2>
      Ordered by priority.
      <ul>
	<li>Automatically run regression tests on update (for packages that have regression tests).
	<li>implement 'darcs trackdown' across all repository types.
	<li>Code to automatically submit patches.
	<li>Able to specify a tag or a branch on the upstream repository
	<li>Make it easy to publish your local patches to others.
	<li>Change tarball backed repositories to git
	<li>Test git rebase
      </ul>
  </body>
</html>
